# Component Definition: Requirement Reporter
# Part of feat_requirement_collector
# Validated against sub_meta_schema.yaml

id: comp_req_reporter
type: module
desc: "输出详细的更新报告，保存到 reports/ 目录。"
file_path: "devspec/core/req_collector/reporter.py"

tech_stack:
  - pathlib
  - datetime

dependencies:
  - comp_req_analyzer

# === 详细设计 (Design) ===
design:
  api:
    - signature: "def generate_report(analysis: AnalysisResult) -> str"
      desc: "Generate markdown report from analysis result"
      params:
        - name: "analysis"
          type: "AnalysisResult"
          desc: "Result from analyzer"
      returns:
        type: "str"
        desc: "Path to the generated report"

  logic: |
    1. Generate filename: `reports/req_update_[YYYYMMDD_HHMM].md`
    2. Format report content:
       - Header: Analysis Summary
       - Vision Alignment Status
       - Task Decomposition (Tree structure)
       - Impact Analysis (Files to be updated)
    3. Write to file
    4. Return file path

  output_files:
    - path: "reports/req_update_*.md"
      format: "Markdown"
